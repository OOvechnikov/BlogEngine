databaseChangeLog:
  - logicalFilePath: db/changelog/db.changelog-blog_engine.yaml

  - changeSet:
      id: 1-0_1
      author: root
      changes:
        - createTable:
            tableName: users
            columns:
              - column:
                  name: id
                  type: INT
                  autoIncrement: true
                  constraints:
                    primaryKey: true
                    nullable: false
              - column:
                  name: is_moderator
                  type: TINYINT
                  constraints:
                    nullable: false
              - column:
                  name: reg_time
                  type: DATETIME
                  constraints:
                    nullable: false
              - column:
                  name: name
                  type: varchar(255)
                  constraints:
                    nullable: false
              - column:
                  name: email
                  type: varchar(255)
                  constraints:
                    nullable: false
              - column:
                  name: passwod
                  type: varchar(255)
                  constraints:
                    nullable: false
              - column:
                  name: code
                  type: varchar(255)
              - column:
                  name: text
                  type: varchar(255)

  - changeSet:
      id: 1-0_2
      author: root
      changes:
        - createTable:
            tableName: posts
            columns:
              - column:
                  name: id
                  type: INT
                  autoIncrement: true
                  constraints:
                    primaryKey: true
                    nullable: false
              - column:
                  name: is_active
                  type: TINYINT
                  constraints:
                    nullable: false
              - column:
                  name: moderation_status
                  type: ENUM('NEW', 'ACCEPTED', 'DECLINED')
                  constraints:
                    nullable: false
              - column:
                  name: moderator_id
                  type: INT
              - column:
                  name: user_id
                  type: INT
                  constraints:
                    nullable: false
              - column:
                  name: time
                  type: DATETIME
                  constraints:
                    nullable: false
              - column:
                  name: title
                  type: VARCHAR(255)
                  constraints:
                    nullable: false
              - column:
                  name: text
                  type: TEXT
                  constraints:
                    nullable: false
              - column:
                  name: view_count
                  type: INT
                  constraints:
                    nullable: false

  - changeSet:
      id: 1-0_3
      author: root
      changes:
        - createTable:
            tableName: post_votes
            columns:
              - column:
                  name: id
                  type: INT
                  autoIncrement: true
                  constraints:
                    primaryKey: true
                    nullable: false
              - column:
                  name: user_id
                  type: INT
                  constraints:
                    nullable: false
              - column:
                  name: post_id
                  type: INT
                  constraints:
                    nullable: false
              - column:
                  name: time
                  type: DATETIME
                  constraints:
                    nullable: false
              - column:
                  name: value
                  type: TINYINT
                  constraints:
                    nullable: false

  - changeSet:
      id: 1-0_4
      author: root
      changes:
        - createTable:
            tableName: tags
            columns:
              - column:
                  name: id
                  type: INT
                  autoIncrement: true
                  constraints:
                    primaryKey: true
                    nullable: false
              - column:
                  name: name
                  type: VARCHAR(255)
                  constraints:
                    nullable: false
  - changeSet:
      id: 1-0_5
      author: root
      changes:
        - createTable:
            tableName: tag2post
            columns:
              - column:
                  name: id
                  type: INT
                  autoIncrement: true
                  constraints:
                    primaryKey: true
                    nullable: false
              - column:
                  name: post_id
                  type: INT
                  constraints:
                    nullable: false
              - column:
                  name: tag_id
                  type: INT
                  constraints:
                    nullable: false

  - changeSet:
      id: 1-0_6
      author: root
      changes:
        - createTable:
            tableName: post_comments
            columns:
              - column:
                  name: id
                  type: INT
                  autoIncrement: true
                  constraints:
                    primaryKey: true
                    nullable: false
              - column:
                  name: parent_id
                  type: INT
              - column:
                  name: post_id
                  type: INT
                  constraints:
                    nullable: false
              - column:
                  name: user_id
                  type: INT
                  constraints:
                    nullable: false
              - column:
                  name: time
                  type: DATETIME
                  constraints:
                    nullable: false
              - column:
                  name: text
                  type: TEXT
                  constraints:
                    nullable: false

  - changeSet:
      id: 1-0_7
      author: root
      changes:
        - createTable:
            tableName: captcha_codes
            columns:
              - column:
                  name: id
                  type: INT
                  autoIncrement: true
                  constraints:
                    primaryKey: true
                    nullable: false
              - column:
                  name: time
                  type: DATETIME
                  constraints:
                    nullable: false
              - column:
                  name: code
                  type: TINYTEXT
                  constraints:
                    nullable: false
              - column:
                  name: secret_code
                  type: TINYTEXT
                  constraints:
                    nullable: false

  - changeSet:
      id: 1-0_8
      author: root
      changes:
        - createTable:
            tableName: global_settings
            columns:
              - column:
                  name: id
                  type: INT
                  autoIncrement: true
                  constraints:
                    primaryKey: true
                    nullable: false
              - column:
                  name: code
                  type: VARCHAR(255)
                  constraints:
                    nullable: false
              - column:
                  name: name
                  type: VARCHAR(255)
                  constraints:
                    nullable: false
              - column:
                  name: value
                  type: VARCHAR(255)
                  constraints:
                    nullable: false


  - changeSet:
      id: 1-1_1
      author: root
      changes:
        - insert:
            tableName: users
            columns:
              - column:
                  name: is_moderator
                  value: 1
              - column:
                  name: reg_time
                  value: '2018-09-21 10:55:23.123'
              - column:
                  name: name
                  value: 'Олег'
              - column:
                  name: email
                  value: 'oleg@gmail.com'
              - column:
                  name: passwod
                  value: 'oleg123'
              - column:
                  name: code
                  value: 'olegus'
              - column:
                  name: text
                  value: 'sadhfshafiuawefiiuhi'

  - changeSet:
      id: 1-1_2
      author: root
      changes:
        - insert:
            tableName: users
            columns:
              - column:
                  name: is_moderator
                  value: 0
              - column:
                  name: reg_time
                  value: '2020-01-13 23:15:41.159'
              - column:
                  name: name
                  value: 'Кристина'
              - column:
                  name: email
                  value: 'kristina@yandex.ru'
              - column:
                  name: passwod
                  value: 'kristina123'
              - column:
                  name: code
                  value: 'kristinus'
              - column:
                  name: text
                  value: null

  - changeSet:
      id: 1-1_3
      author: root
      changes:
        - insert:
            tableName: users
            columns:
              - column:
                  name: is_moderator
                  value: 0
              - column:
                  name: reg_time
                  value: '2015-01-02 05:43:25.783'
              - column:
                  name: name
                  value: 'Евгений'
              - column:
                  name: email
                  value: 'eugene@mail.ru'
              - column:
                  name: passwod
                  value: 'eugene123'
              - column:
                  name: code
                  value: 'evgenus'
              - column:
                  name: text
                  value: '123123wdffddsf'

  - changeSet:
      id: 1-1_4
      author: root
      changes:
        - insert:
            tableName: posts
            columns:
              - column:
                  name: is_active
                  value: 1
              - column:
                  name: moderation_status
                  value: 'NEW'
              - column:
                  name: moderator_id
                  value: 1
              - column:
                  name: user_id
                  value: 1
              - column:
                  name: time
                  value: '2019-12-02 07:10:23.783'
              - column:
                  name: title
                  value: 'Olegs_post'
              - column:
                  name: text
                  value: 'Тут очень много Олегового текста'
              - column:
                  name: view_count
                  value: 100500

  - changeSet:
      id: 1-1_5
      author: root
      changes:
        - insert:
            tableName: posts
            columns:
              - column:
                  name: is_active
                  value: 1
              - column:
                  name: moderation_status
                  value: 'ACCEPTED'
              - column:
                  name: moderator_id
                  value: 1
              - column:
                  name: user_id
                  value: 2
              - column:
                  name: time
                  value: '2019-10-03 12:59:21.000'
              - column:
                  name: title
                  value: 'Kristinas_post'
              - column:
                  name: text
                  value: 'Тут очень много Кристининого текста'
              - column:
                  name: view_count
                  value: 23156

  - changeSet:
      id: 1-1_6
      author: root
      changes:
        - insert:
            tableName: posts
            columns:
              - column:
                  name: is_active
                  value: 0
              - column:
                  name: moderation_status
                  value: 'DECLINED'
              - column:
                  name: moderator_id
                  value: 1
              - column:
                  name: user_id
                  value: 3
              - column:
                  name: time
                  value: '2013-02-27 22:36:21.999'
              - column:
                  name: title
                  value: 'Eugenes_post'
              - column:
                  name: text
                  value: 'Тут очень много запрещенного Евгениного текста'
              - column:
                  name: view_count
                  value: 0

  - changeSet:
      id: 1-1_7
      author: root
      changes:
        - insert:
            tableName: post_votes
            columns:
              - column:
                  name: user_id
                  value: 3
              - column:
                  name: post_id
                  value: 1
              - column:
                  name: time
                  value: '2020-01-15 03:14:42.684'
              - column:
                  name: value
                  value: 1

  - changeSet:
      id: 1-1_8
      author: root
      changes:
        - insert:
            tableName: post_votes
            columns:
              - column:
                  name: user_id
                  value: 2
              - column:
                  name: post_id
                  value: 1
              - column:
                  name: time
                  value: '2020-01-16 21:17:13.127'
              - column:
                  name: value
                  value: 1

  - changeSet:
      id: 1-1_9
      author: root
      changes:
        - insert:
            tableName: post_votes
            columns:
              - column:
                  name: user_id
                  value: 1
              - column:
                  name: post_id
                  value: 2
              - column:
                  name: time
                  value: '2019-10-05 18:46:18.843'
              - column:
                  name: value
                  value: -1

  - changeSet:
      id: 1-1_10
      author: root
      changes:
        - insert:
            tableName: post_votes
            columns:
              - column:
                  name: user_id
                  value: 3
              - column:
                  name: post_id
                  value: 2
              - column:
                  name: time
                  value: '2019-10-09 09:24:42.843'
              - column:
                  name: value
                  value: 1

  - changeSet:
      id: 1-1_11
      author: root
      changes:
        - insert:
            tableName: tags
            columns:
              - column:
                  name: name
                  value: 'first_tag'

  - changeSet:
      id: 1-1_12
      author: root
      changes:
        - insert:
            tableName: tags
            columns:
              - column:
                  name: name
                  value: 'second_tag'

  - changeSet:
      id: 1-1_13
      author: root
      changes:
        - insert:
            tableName: tag2post
            columns:
              - column:
                  name: post_id
                  value: 1
              - column:
                  name: tag_id
                  value: 2

  - changeSet:
      id: 1-1_14
      author: root
      changes:
        - insert:
            tableName: tag2post
            columns:
              - column:
                  name: post_id
                  value: 2
              - column:
                  name: tag_id
                  value: 1

  - changeSet:
      id: 1-1_15
      author: root
      changes:
        - insert:
            tableName: post_comments
            columns:
              - column:
                  name: parent_id
                  value: null
              - column:
                  name: post_id
                  value: 1
              - column:
                  name: user_id
                  value: 3
              - column:
                  name: time
                  value: '2020-01-15 03:25:21.438'
              - column:
                  name: text
                  value: 'Развернутый комментарий как все хорошо'

  - changeSet:
      id: 1-1_16
      author: root
      changes:
        - insert:
            tableName: post_comments
            columns:
              - column:
                  name: parent_id
                  value: 1
              - column:
                  name: post_id
                  value: 1
              - column:
                  name: user_id
                  value: 2
              - column:
                  name: time
                  value: '2020-01-15 05:12:54.159'
              - column:
                  name: text
                  value: 'Комментарий на комментарий о своем неполном согласии'

  - changeSet:
      id: 1-1_17
      author: root
      changes:
        - insert:
            tableName: post_comments
            columns:
              - column:
                  name: parent_id
                  value: null
              - column:
                  name: post_id
                  value: 2
              - column:
                  name: user_id
                  value: 1
              - column:
                  name: time
                  value: '2019-10-05 19:01:13.123'
              - column:
                  name: text
                  value: 'Сжатый отрицательный комментарий'

  - changeSet:
      id: 1-1_18
      author: root
      changes:
        - insert:
            tableName: captcha_codes
            columns:
              - column:
                  name: time
                  value: '2019-10-05 19:00:35.651'
              - column:
                  name: code
                  value: 'FHCNV'
              - column:
                  name: secret_code
                  value: 'secret_code_1'

  - changeSet:
      id: 1-1_19
      author: root
      changes:
        - insert:
            tableName: captcha_codes
            columns:
              - column:
                  name: time
                  value: '2020-01-15 05:11:12.492'
              - column:
                  name: code
                  value: 'IQMCD'
              - column:
                  name: secret_code
                  value: 'secret_code_2'

  - changeSet:
      id: 1-1_20
      author: root
      changes:
        - insert:
            tableName: global_settings
            columns:
              - column:
                  name: code
                  value: 'MULTIUSER_MODE'
              - column:
                  name: name
                  value: 'Многопользовательский режим'
              - column:
                  name: value
                  value: 'YES'

#  - changeSet:
#      id: 1-1_21
#      author: root
#      changes:
#        - insert:
#            tableName: global_settings
#            columns:
#              - column:
#                  name: code
#                  value: 'MULTIUSER_MODE'
#              - column:
#                  name: name
#                  value: 'Многопользовательский режим'
#              - column:
#                  name: value
#                  value: 'NO'

  - changeSet:
      id: 1-1_22
      author: root
      changes:
        - insert:
            tableName: global_settings
            columns:
              - column:
                  name: code
                  value: 'POST_PREMODERATION'
              - column:
                  name: name
                  value: 'Премодерация постов'
              - column:
                  name: value
                  value: 'YES'

#  - changeSet:
#      id: 1-1_23
#      author: root
#      changes:
#        - insert:
#            tableName: global_settings
#            columns:
#              - column:
#                  name: code
#                  value: 'POST_PREMODERATION'
#              - column:
#                  name: name
#                  value: 'Премодерация постов'
#              - column:
#                  name: value
#                  value: 'NO'

  - changeSet:
      id: 1-1_24
      author: root
      changes:
        - insert:
            tableName: global_settings
            columns:
              - column:
                  name: code
                  value: 'STATISTICS_IS_PUBLIC'
              - column:
                  name: name
                  value: 'Показывать всем статистику блога'
              - column:
                  name: value
                  value: 'YES'

#  - changeSet:
#      id: 1-1_25
#      author: root
#      changes:
#        - insert:
#            tableName: global_settings
#            columns:
#              - column:
#                  name: code
#                  value: 'STATISTICS_IS_PUBLIC'
#              - column:
#                  name: name
#                  value: 'Показывать всем статистику блога'
#              - column:
#                  name: value
#                  value: 'NO'

